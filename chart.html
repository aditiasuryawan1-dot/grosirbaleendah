<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Keranjang Belanja - Grosir Baleendah</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {font-family: Arial, sans-serif; margin:0; padding:10px; background:#f5f5f5;}
    h1 {text-align:center; color:#df0901; font-size:22px; margin-bottom:15px;}

    /* Card produk */
    .cart-item {
      display:flex; align-items:center; justify-content:space-between;
      background:#fff; padding:10px; margin-bottom:10px;
      border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1);
    }
    .cart-item img {width:70px; height:70px; object-fit:cover; border-radius:6px; margin-right:10px;}
    .item-info {flex:1;}
    .item-info h3 {margin:0; font-size:15px;}
    .item-info p {margin:3px 0; font-size:13px; color:#555;}
    .item-actions {text-align:right;}
    .item-actions input {
      width:50px; padding:5px; text-align:center; border:1px solid #ccc; border-radius:4px;
    }
    .hapus-btn {
      display:block; margin-top:5px;
      background:#dc3545; color:#fff; border:none;
      padding:5px 8px; border-radius:4px; cursor:pointer; font-size:12px;
    }
    .hapus-btn:hover {background:#b02a37;}

    .total-box {text-align:right; font-size:16px; margin:10px 0; font-weight:bold;}

    form {background:#fff; padding:15px; border-radius:8px; margin-top:15px;}
    form h2 {font-size:18px; margin-top:0;}
    form label {display:block; margin-top:10px; font-weight:bold; font-size:14px;}
    form input, form select, form textarea {
      width:100%; padding:10px; margin-top:5px;
      border:1px solid #ccc; border-radius:4px; font-size:14px;
    }
    .rekening {background:#eee; padding:10px; margin:10px 0; border-radius:6px; font-size:14px;}
    .checkout-btn {
      display:block; width:100%; padding:14px; margin-top:15px;
      background:#28a745; color:#fff; border:none; border-radius:6px;
      font-size:16px; cursor:pointer;
    }
    .checkout-btn:hover {background:#218838;}

    .back-btn {
      display:inline-block; margin-bottom:15px; padding:10px 15px;
      background:#007bff; color:#fff; border:none; border-radius:6px;
      font-size:14px; text-decoration:none;
    }
    .back-btn:hover {background:#0056b3;}
  </style>
</head>
<body>

<h1>Keranjang Belanja</h1>
<a href="index.html" class="back-btn">â¬… Kembali Belanja</a>

<div id="cartList">
  <!-- Contoh item -->
  <div class="cart-item">
    <img src="image/sembako/minyak kita 1L.jpg" alt="Minyak Kita">
    <div class="item-info">
      <h3>Minyak Kita 1L</h3>
      <p>Harga: 16.300</p>
      <p class="subtotal">Subtotal: 32.600</p>
    </div>
    <div class="item-actions">
      <input type="number" value="2" min="1" onchange="updateTotal()">
      <button class="hapus-btn" onclick="hapusItem(this)">Hapus</button>
    </div>
  </div>

  <div class="cart-item">
    <img src="image/makanan instan/Indomie Goreng.jpg" alt="Indomie Goreng">
    <div class="item-info">
      <h3>Indomie Goreng</h3>
      <p>Harga: 2.900</p>
      <p class="subtotal">Subtotal: 14.500</p>
    </div>
    <div class="item-actions">
      <input type="number" value="5" min="1" onchange="updateTotal()">
      <button class="hapus-btn" onclick="hapusItem(this)">Hapus</button>
    </div>
  </div>
</div>

<div class="total-box" id="totalBox">Total: Rp 47.100</div>

<form id="checkoutForm">
  <h2>Data Pembeli</h2>
  <label>Nama Lengkap</label>
  <input type="text" id="nama" required>
  
  <label>Alamat Lengkap</label>
  <textarea id="alamat" required></textarea>
  
  <label>No HP</label>
  <input type="text" id="nohp" required>
  
  <label>Kecamatan</label>
  <select id="kecamatan" onchange="updateTotal()">
    <option value="" data-ongkir="0">-- Pilih Kecamatan --</option>
    <option value="Baleendah" data-ongkir="5000">Baleendah - Rp 5.000</option>
    <option value="Dayeuhkolot" data-ongkir="7000">Dayeuhkolot - Rp 7.000</option>
    <option value="Banjaran" data-ongkir="8000">Banjaran - Rp 8.000</option>
  </select>
  
  <div class="total-box" id="ongkirBox">Ongkir: Rp 0</div>
  <div class="total-box" id="grandTotalBox">Total Bayar: Rp 47.100</div>
  
  <label>Metode Pembayaran</label>
  <select id="metode" onchange="toggleRekening()">
    <option value="COD">COD (Bayar di Tempat)</option>
    <option value="Transfer">Transfer</option>
  </select>
  
  <div class="rekening" id="rekeningBox" style="display:none;">
    Silakan transfer ke salah satu rekening:<br>
    <b>BCA: 3371777626</b><br>
    <b>Mandiri: 1300062044600</b>
  </div>
  
  <button type="button" class="checkout-btn" onclick="checkout()">Checkout via WhatsApp</button>
</form>

<script>
function updateTotal(){
  let items = document.querySelectorAll(".cart-item");
  let total = 0;
  items.forEach(item=>{
    let harga = parseInt(item.querySelector("p").innerText.replace("Harga: ","").replace(".",""));
    let qty = parseInt(item.querySelector("input").value);
    let subtotal = harga * qty;
    item.querySelector(".subtotal").innerText = "Subtotal: " + subtotal.toLocaleString();
    total += subtotal;
  });

  let kecamatanSelect = document.getElementById("kecamatan");
  let ongkir = parseInt(kecamatanSelect.options[kecamatanSelect.selectedIndex]?.dataset.ongkir || 0);

  document.getElementById("totalBox").innerText = "Total: Rp " + total.toLocaleString();
  document.getElementById("ongkirBox").innerText = "Ongkir: Rp " + ongkir.toLocaleString();
  document.getElementById("grandTotalBox").innerText = "Total Bayar: Rp " + (total+ongkir).toLocaleString();
}

function hapusItem(btn){
  btn.closest(".cart-item").remove();
  updateTotal();
}

function toggleRekening(){
  let metode = document.getElementById("metode").value;
  document.getElementById("rekeningBox").style.display = (metode=="Transfer") ? "block" : "none";
}

function checkout(){
  let nama = document.getElementById("nama").value;
  let alamat = document.getElementById("alamat").value;
  let nohp = document.getElementById("nohp").value;
  let kecamatan = document.getElementById("kecamatan").value;
  let metode = document.getElementById("metode").value;

  let items = document.querySelectorAll(".cart-item");
  if(items.length === 0){
    alert("Keranjang masih kosong!");
    return;
  }

  let pesan = "Halo, saya ingin pesan:\n";
  items.forEach(item=>{
    let produk = item.querySelector("h3").innerText;
    let qty = item.querySelector("input").value;
    pesan += "- " + produk + " x" + qty + "\n";
  });

  let total = document.getElementById("grandTotalBox").innerText;
  pesan += "\n" + total;
  pesan += "\nNama: " + nama;
  pesan += "\nAlamat: " + alamat + ", " + kecamatan;
  pesan += "\nNo HP: " + nohp;
  pesan += "\nMetode Bayar: " + metode;

  if(metode=="Transfer"){
    pesan += "\nRekening tujuan: BCA 3371777626 / Mandiri 1300062044600";
  }

  let url = "https://wa.me/628997944479?text=" + encodeURIComponent(pesan);
  window.open(url, "_blank");
}

updateTotal();
</script>

</body>
</html>




